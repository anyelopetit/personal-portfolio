function copy(e){var t=document.createElement("input");t.setAttribute("value",$("#"+e).val()),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyPartial(e){const t=document.createElement("textarea");t.value=$("#partial"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyHtml(e){const t=document.createElement("textarea");t.value=$("#"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyHtml(e){const t=document.createElement("textarea");t.value=$("#"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function copyPartial(e){const t=document.createElement("textarea");t.value=$("#partial"+e)[0].attributes.value.value,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ActiveStorage=t():e.ActiveStorage=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){"use strict";function n(e){var t=o(document.head,'meta[name="'+e+'"]');if(t)return t.getAttribute("content")}function i(e,t){return"string"==typeof e&&(t=e,e=document),a(e.querySelectorAll(t))}function o(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.disabled,o=n.bubbles,r=n.cancelable,a=n.detail,s=document.createEvent("Event");s.initEvent(t,o||!0,r||!0),s.detail=a||{};try{e.disabled=!1,e.dispatchEvent(s)}finally{e.disabled=i}return s}function a(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}t.d=n,t.c=i,t.b=o,t.a=r,t.e=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(e&&"function"==typeof e[t]){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return e[t].apply(e,i)}}n.d(t,"a",function(){return u});var r=n(6),a=n(8),s=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=0,u=function(){function e(t,n,o){i(this,e),this.id=++l,this.file=t,this.url=n,this.delegate=o}return c(e,[{key:"create",value:function(e){var t=this;r.a.create(this.file,function(n,i){if(n)e(n);else{var r=new a.a(t.file,i,t.url);o(t.delegate,"directUploadWillCreateBlobWithXHR",r.xhr),r.create(function(n){if(n)e(n);else{var i=new s.a(r);o(t.delegate,"directUploadWillStoreFileWithXHR",i.xhr),i.create(function(t){t?e(t):e(null,r.toJSON())})}})}})}}]),e}()},function(e,t,n){"use strict";function i(){window.ActiveStorage&&Object(o.a)()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(1);n.d(t,"start",function(){return o.a}),n.d(t,"DirectUpload",function(){return r.a}),setTimeout(i,1)},function(e,t,n){"use strict";function i(){f||(f=!0,document.addEventListener("submit",o),document.addEventListener("ajax:before",r))}function o(e){a(e)}function r(e){"FORM"==e.target.tagName&&a(e)}function a(e){var t=e.target;if(t.hasAttribute(h))e.preventDefault();else{var n=new u.a(t),i=n.inputs;i.length&&(e.preventDefault(),t.setAttribute(h,""),i.forEach(c),n.start(function(e){t.removeAttribute(h),e?i.forEach(l):s(t)}))}}function s(e){var t=Object(d.b)(e,"input[type=submit]");if(t){var n=t.disabled;t.disabled=!1,t.focus(),t.click(),t.disabled=n}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t)}function c(e){e.disabled=!0}function l(e){e.disabled=!1}t.a=i;var u=n(4),d=n(0),h="data-direct-uploads-processing",f=!1},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var o=n(5),r=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="input[type=file][data-direct-upload-url]:not([disabled])",c=function(){function e(t){i(this,e),this.form=t,this.inputs=Object(r.c)(t,s).filter(function(e){return e.files.length})}return a(e,[{key:"start",value:function(e){var t=this,n=this.createDirectUploadControllers();this.dispatch("start"),function i(){var o=n.shift();o?o.start(function(n){n?(e(n),t.dispatch("end")):i()}):(e(),t.dispatch("end"))}()}},{key:"createDirectUploadControllers",value:function(){var e=[];return this.inputs.forEach(function(t){Object(r.e)(t.files).forEach(function(n){var i=new o.a(t,n);e.push(i)})}),e}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this.form,"direct-uploads:"+e,{detail:t})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return s});var o=n(1),r=n(0),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){i(this,e),this.input=t,this.file=n,this.directUpload=new o.a(this.file,this.url,this),this.dispatch("initialize")}return a(e,[{key:"start",value:function(e){var t=this,n=document.createElement("input");n.type="hidden",n.name=this.input.name,this.input.insertAdjacentElement("beforebegin",n),this.dispatch("start"),this.directUpload.create(function(i,o){i?(n.parentNode.removeChild(n),t.dispatchError(i)):n.value=o.signed_id,t.dispatch("end"),e(i)})}},{key:"uploadRequestDidProgress",value:function(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.file=this.file,t.id=this.directUpload.id,Object(r.a)(this.input,"direct-upload:"+e,{detail:t})}},{key:"dispatchError",value:function(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function(){return this.input.getAttribute("data-direct-upload-url")}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return c});var o=n(7),r=n.n(o),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,c=function(){function e(t){i(this,e),this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return a(e,null,[{key:"create",value:function(t,n){new e(t).create(n)}}]),a(e,[{key:"create",value:function(e){var t=this;this.callback=e,this.md5Buffer=new r.a.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return t.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return t.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),n=btoa(t);this.callback(null,n)}}},{key:"fileReaderDidError",value:function(){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function(){if(this.chunkIndex<this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),n=s.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}return!1}}]),e}()},function(e){!function(t){e.exports=t()}(function(e){"use strict";function t(e,t){var n=e[0],i=e[1],o=e[2],r=e[3];i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&o)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&i)+t[2]+606105819|0)<<17|o>>>15)+r|0)&r|~o&n)+t[3]-1044525330|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&o)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&i)+t[6]-1473231341|0)<<17|o>>>15)+r|0)&r|~o&n)+t[7]-45705983|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&o)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&i)+t[10]-42063|0)<<17|o>>>15)+r|0)&r|~o&n)+t[11]-1990404162|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&o)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&i)+t[14]-1502002290|0)<<17|o>>>15)+r|0)&r|~o&n)+t[15]+1236535329|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[1]-165796510|0)<<5|n>>>27)+i|0)&o|i&~o)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&i|n&~i)+t[11]+643717713|0)<<14|o>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[5]-701558691|0)<<5|n>>>27)+i|0)&o|i&~o)+t[10]+38016083|0)<<9|r>>>23)+n|0)&i|n&~i)+t[15]-660478335|0)<<14|o>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[9]+568446438|0)<<5|n>>>27)+i|0)&o|i&~o)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&i|n&~i)+t[3]-187363961|0)<<14|o>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[13]-1444681467|0)<<5|n>>>27)+i|0)&o|i&~o)+t[2]-51403784|0)<<9|r>>>23)+n|0)&i|n&~i)+t[7]+1735328473|0)<<14|o>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[5]-378558|0)<<4|n>>>28)+i|0)^i^o)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^i)+t[11]+1839030562|0)<<16|o>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[1]-1530992060|0)<<4|n>>>28)+i|0)^i^o)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^i)+t[7]-155497632|0)<<16|o>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[13]+681279174|0)<<4|n>>>28)+i|0)^i^o)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^i)+t[3]-722521979|0)<<16|o>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[9]-640364487|0)<<4|n>>>28)+i|0)^i^o)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^i)+t[15]+530742520|0)<<16|o>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|i>>>9)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[0]-198630844|0)<<6|n>>>26)+i|0)|~o))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[14]-1416354905|0)<<15|o>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|i>>>11)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[12]+1700485571|0)<<6|n>>>26)+i|0)|~o))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[10]-1051523|0)<<15|o>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|i>>>11)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[8]+1873313359|0)<<6|n>>>26)+i|0)|~o))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[6]-1560198380|0)<<15|o>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|i>>>11)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[4]-145523070|0)<<6|n>>>26)+i|0)|~o))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[2]+718787259|0)<<15|o>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|i>>>11)+o|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=o+e[2]|0,e[3]=r+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var i,o,r,a,s,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=l;i+=64)t(u,n(e.substring(i-64,i)));for(o=(e=e.substring(i-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<o;i+=1)r[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(t(u,r),i=0;i<16;i+=1)r[i]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),c=parseInt(a[1],16)||0,r[14]=s,r[15]=c,t(u,r),u}function r(e){var n,o,r,a,s,c,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=l;n+=64)t(u,i(e.subarray(n-64,n)));for(o=(e=n-64<l?e.subarray(n-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<o;n+=1)r[n>>2]|=e[n]<<(n%4<<3);if(r[n>>2]|=128<<(n%4<<3),n>55)for(t(u,r),n=0;n<16;n+=1)r[n]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(a[2],16),c=parseInt(a[1],16)||0,r[14]=s,r[15]=c,t(u,r),u}function a(e){var t,n="";for(t=0;t<4;t+=1)n+=p[e>>8*t+4&15]+p[e>>8*t&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var n,i=e.length,o=new ArrayBuffer(i),r=new Uint8Array(o);for(n=0;n<i;n+=1)r[n]=e.charCodeAt(n);return t?r:o}function u(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,n){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e)),i.set(new Uint8Array(t),e.byteLength),n?i:i.buffer}function h(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function f(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return s(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,i){var o,r,a,s,c=this.byteLength,l=t(n,c),u=c;return i!==e&&(u=t(i,c)),l>u?new ArrayBuffer(0):(o=u-l,r=new ArrayBuffer(o),a=new Uint8Array(r),s=new Uint8Array(this,l,o),a.set(s),r)}}(),f.prototype.append=function(e){return this.appendBinary(c(e)),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var i,o=this._buff.length;for(i=64;i<=o;i+=64)t(this._hash,n(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},f.prototype.end=function(e){var t,n,i=this._buff,o=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)r[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(r,o),n=s(this._hash),e&&(n=h(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},f.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(e,n){var i,o,r,a=n;if(e[a>>2]|=128<<(a%4<<3),a>55)for(t(this._hash,e),a=0;a<16;a+=1)e[a]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),r=parseInt(i[1],16)||0,e[14]=o,e[15]=r,t(this._hash,e)},f.hash=function(e,t){return f.hashBinary(c(e),t)},f.hashBinary=function(e,t){var n=s(o(e));return t?h(n):n},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var n,o=d(this._buff.buffer,e,!0),r=o.length;for(this._length+=e.byteLength,n=64;n<=r;n+=64)t(this._hash,i(o.subarray(n-64,n)));return this._buff=n-64<r?new Uint8Array(o.buffer.slice(n-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,o=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)r[t>>2]|=i[t]<<(t%4<<3);return this._finish(r,o),n=s(this._hash),e&&(n=h(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var e=f.prototype.getState.call(this);return e.buff=u(e.buff),e},f.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),f.prototype.setState.call(this,e)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(e,t){var n=s(r(new Uint8Array(e)));return t?h(n):n},f})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a});var o=n(0),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){var a=this;i(this,e),this.file=t,this.attributes={filename:t.name,content_type:t.type,byte_size:t.size,checksum:n},this.xhr=new XMLHttpRequest,this.xhr.open("POST",r,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",Object(o.d)("csrf-token")),this.xhr.addEventListener("load",function(e){return a.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return a.requestDidError(e)})}return r(e,[{key:"create",value:function(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function(e){if(this.status>=200&&this.status<300){var t=this.response,n=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function(){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function(){return this.xhr.status}},{key:"response",get:function(){var e=this.xhr,t=e.responseType,n=e.response;return"json"==t?n:JSON.parse(n)}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=this;i(this,e),this.blob=t,this.file=t.file;var o=t.directUploadData,r=o.url,a=o.headers;for(var s in this.xhr=new XMLHttpRequest,this.xhr.open("PUT",r,!0),this.xhr.responseType="text",a)this.xhr.setRequestHeader(s,a[s]);this.xhr.addEventListener("load",function(e){return n.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return n.requestDidError(e)})}return o(e,[{key:"create",value:function(e){this.callback=e,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function(e){var t=this.xhr,n=t.status,i=t.response;n>=200&&n<300?this.callback(null,i):this.requestDidError(e)}},{key:"requestDidError",value:function(){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),e}()}])}),$(document).on("turbolinks:load",function(){function e(){$(document).keypress("s",function(e){e.ctrlKey&&"s"==e.key&&(e.preventDefault(),"#{@view.name}.html.erb"===tab?(alert("pasooo"),codeHTML.save(id)):"#{@view.name}.scss"===tab?codeCSS.save(id):"#{@view.name}.js"===tab?codeJs.save(id):"Action"===tab&&codeAction.save(id))})}$(document).ready(function(){$("#btn-assets-editor").click(function(){$("#assets-editor").addClass("control-sidebar-open"),e()}),$("#btn-theme-editor").click(function(){$("#theme-editor").addClass("control-sidebar-open"),e()}),$("#btn-views-editor").click(function(){$("#views-editor").addClass("control-sidebar-open"),e()}),$("#close-assets-editor").click(function(){$("#assets-editor").removeClass("control-sidebar-open")}),$("#close-theme-editor").click(function(){$("#theme-editor").removeClass("control-sidebar-open")}),$("#close-views-editor").click(function(){$("#views-editor").removeClass("control-sidebar-open")})})}),function(e){"use strict";function t(t,n){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n)}function n(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function i(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function o(e){return e?c.text(e).html():""}function r(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function a(t,n){var i=!1;return e.each(n,function(e,n){if("number"==typeof n&&t.which===n)return i=!0,!1;if(t.which===n.which){var o=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,r=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,a=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(o&&r&&a)return i=!0,!1}}),i}var s={tagClass:function(){return"label label-keppler"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,n,i){var r=this;if(!(r.options.maxTags&&r.itemsArray.length>=r.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&r.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!r.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(r.isSelect&&!r.multiple&&r.itemsArray.length>0&&r.remove(r.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var a=r.options.delimiterRegex?r.options.delimiterRegex:r.options.delimiter,s=t.split(a);if(s.length>1){for(var c=0;c<s.length;c++)this.add(s[c],!0);return void(n||r.pushVal())}}var l=r.options.itemValue(t),u=r.options.itemText(t),d=r.options.tagClass(t),h=r.options.itemTitle(t),f=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)===l})[0];if(!f||r.options.allowDuplicates){if(!(r.items().toString().length+t.length+1>r.options.maxInputLength)){var p=e.Event("beforeItemAdd",{item:t,cancel:!1,options:i});if(r.$element.trigger(p),!p.cancel){r.itemsArray.push(t);var m=e('<span class="tag '+o(d)+(null!==h?'" title="'+h:"")+'">'+o(u)+'<span data-role="remove"></span></span>');if(m.data("item",t),r.findInputWrapper().before(m),m.after(" "),r.isSelect&&!e('option[value="'+encodeURIComponent(l)+'"]',r.$element)[0]){var g=e("<option selected>"+o(u)+"</option>");g.data("item",t),g.attr("value",l),r.$element.append(g)}n||r.pushVal(),(r.options.maxTags===r.itemsArray.length||r.items().toString().length===r.options.maxInputLength)&&r.$container.addClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemAdded",{item:t,options:i}))}}}else if(r.options.onTagExists){var v=e(".tag",r.$container).filter(function(){return e(this).data("item")===f});r.options.onTagExists(t,v)}}}},remove:function(t,n,i){var o=this;if(o.objectItems&&(t=(t="object"==typeof t?e.grep(o.itemsArray,function(e){return o.options.itemValue(e)==o.options.itemValue(t)}):e.grep(o.itemsArray,function(e){return o.options.itemValue(e)==t}))[t.length-1]),t){var r=e.Event("beforeItemRemove",{item:t,cancel:!1,options:i});if(o.$element.trigger(r),r.cancel)return;e(".tag",o.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",o.$element).filter(function(){return e(this).data("item")===t}).remove(),-1!==e.inArray(t,o.itemsArray)&&o.itemsArray.splice(e.inArray(t,o.itemsArray),1)}n||o.pushVal(),o.options.maxTags>o.itemsArray.length&&o.$container.removeClass("bootstrap-tagsinput-max"),o.$element.trigger(e.Event("itemRemoved",{item:t,options:i}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),i=n.data("item"),r=t.options.itemValue(i),a=t.options.itemText(i),s=t.options.tagClass(i);(n.attr("class",null),n.addClass("tag "+o(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(a),t.isSelect)&&e("option",t.$element).filter(function(){return e(this).data("item")===i}).attr("value",r)})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0).trigger("change")},build:function(t){var o=this;if(o.options=e.extend({},s,t),o.objectItems&&(o.options.freeInput=!1),n(o.options,"itemValue"),n(o.options,"itemText"),i(o.options,"tagClass"),o.options.typeahead){var c=o.options.typeahead||{};i(c,"source"),o.$input.typeahead(e.extend({},c,{source:function(t,n){function i(e){for(var t=[],i=0;i<e.length;i++){var a=o.options.itemText(e[i]);r[a]=e[i],t.push(a)}n(t)}this.map={};var r=this.map,a=c.source(t);e.isFunction(a.success)?a.success(i):e.isFunction(a.then)?a.then(i):e.when(a).then(i)},updater:function(e){return o.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(o.options.typeaheadjs){var l=null,u={},d=o.options.typeaheadjs;e.isArray(d)?(l=d[0],u=d[1]):u=d,o.$input.typeahead(l,u).on("typeahead:selected",e.proxy(function(e,t){u.valueKey?o.add(t[u.valueKey]):o.add(t),o.$input.typeahead("val","")},o))}o.$container.on("click",e.proxy(function(){o.$element.attr("disabled")||o.$input.removeAttr("disabled"),o.$input.focus()},o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",e.proxy(function(){0===e(".typeahead, .twitter-typeahead",o.$container).length&&(o.add(o.$input.val()),o.$input.val(""))},o)),o.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),i=o.findInputWrapper();if(o.$element.attr("disabled"))o.$input.attr("disabled","disabled");else{switch(t.which){case 8:if(0===r(n[0])){var a=i.prev();a.length&&o.remove(a.data("item"))}break;case 46:if(0===r(n[0])){var s=i.next();s.length&&o.remove(s.data("item"))}break;case 37:var c=i.prev();0===n.val().length&&c[0]&&(c.before(i),n.focus());break;case 39:var l=i.next();0===n.val().length&&l[0]&&(l.after(i),n.focus())}var u=n.val().length;Math.ceil(u/5),n.attr("size",Math.max(this.inputSize,n.val().length))}},o)),o.$container.on("keypress","input",e.proxy(function(t){var n=e(t.target);if(o.$element.attr("disabled"))o.$input.attr("disabled","disabled");else{var i=n.val(),r=o.options.maxChars&&i.length>=o.options.maxChars;o.options.freeInput&&(a(t,o.options.confirmKeys)||r)&&(0!==i.length&&(o.add(r?i.substr(0,o.options.maxChars):i),n.val("")),!1===o.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var s=n.val().length;Math.ceil(s/5),n.attr("size",Math.max(this.inputSize,n.val().length))}},o)),o.$container.on("click","[data-role=remove]",e.proxy(function(t){o.$element.attr("disabled")||o.remove(e(t.target).closest(".tag").data("item"))},o)),o.options.itemValue===s.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):e("option",o.$element).each(function(){o.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(n,i,o){var r=[];return this.each(function(){var a=e(this).data("tagsinput");if(a)if(n||i){if(void 0!==a[n]){if(3===a[n].length&&void 0!==o)var s=a[n](i,null,o);else s=a[n](i);void 0!==s&&r.push(s)}}else r.push(a);else a=new t(this,n),e(this).data("tagsinput",a),r.push(a),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof n?r.length>1?r:r[0]:r},e.fn.tagsinput.Constructor=t;var c=e("<div />");e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);var editor="",editor_css="",editor_js="",editor_js_erb="",editor_action="",editor_callback="",editor_function="",controls={codes:{},save:function(e){this.codes={html:editor.getValue(),scss:editor_css.getValue(),js:editor_js.getValue(),ruby:editor_action.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$("#code-css").val(editor_css.getValue()),$("#code-js").val(editor_js.getValue()),$("#code-action").val(editor_action.getValue()),$(".html_signal").css("display","none"),$(".scss_signal").css("display","none"),$(".js_signal").css("display","none"),$(".action_signal").css("display","none")})},saveLayout:function(e){this.codes={html:editor.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")})},saveOnlyAction:function(){this.codes={ruby:editor.getValue()},$.post("/admin/frontend/views/"+id+"/editor/save",this.codes,function(){$("#code-action").val(editor_action.getValue()),$(".action_signal").css("display","none")})},saveViewJs:function(){this.codes={ruby:editor_action.getValue(),js_erb:editor_js_erb.getValue()},$.post("/admin/frontend/views/"+id+"/editor/save",this.codes,function(){$("#code-action").val(editor_action.getValue()),$("#code-js-erb").val(editor_js_erb.getValue()),$(".action_signal").css("display","none"),$(".js_erb_signal").css("display","none")})}},codeHTML={codeMirrorHtml:function(){return $("#code-html").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,theme:"monokai",tabSize:2,autoCloseTags:!0,matchTags:{bothTags:!0},showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-J":"toMatchingTag"}})).on("change",function(){editor.getValue()===$("#code-html").val()?$(".html_signal").css("display","none"):$(".html_signal").css("display","block")})}),editor},save:function(e){editor.getValue()!==$("#code-html").val()&&(this.codes={html:editor.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")}))},saveLayout:function(e){editor.getValue()!==$("#code-html").val()&&(this.codes={html:editor.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")}))}},codeCSS={codeMirrorCSS:function(){return $("#code-css").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_css=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-scss",keyMap:"sublime",theme:"monokai",
autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,showTrailingSpace:!0,tabSize:2,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_css.getValue()===$("#code-css").val()?$(".scss_signal").css("display","none"):$(".scss_signal").css("display","block")})}),editor_css},save:function(e){editor_css.getValue()!==$("#code-css").val()&&(this.codes={scss:editor_css.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-css").val(editor_css.getValue()),$(".scss_signal").css("display","none")}))}},codeJs={codeMirrorJs:function(){return $("#code-js").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_js=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/javascript",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_js.getValue()===$("#code-js").val()?$(".js_signal").css("display","none"):$(".js_signal").css("display","block")})}),editor_js},save:function(e){editor_js.getValue()!==$("#code-js").val()&&(this.codes={js:editor_js.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-js").val(editor_js.getValue()),$(".js_signal").css("display","none")}))}},codeJsErb={codeMirrorJsErb:function(){return $("#code-js-erb").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_js_erb=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/javascript",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_js_erb.getValue()===$("#code-js").val()?$(".js_erb_signal").css("display","none"):$(".js_erb_signal").css("display","block")})}),editor_js},save:function(e){editor_js_erb.getValue()!==$("#code-js-erb").val()&&(this.codes={js_erb:editor_js_erb.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-js-erb").val(editor_js_erb.getValue()),$(".js_erb_signal").css("display","none")}))}},codeAction={codeMirrorAction:function(){return $("#code-action").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_action=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-ruby",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_action.getValue()===$("#code-action").val()?$(".action_signal").css("display","none"):$(".action_signal").css("display","block")})}),editor_action},save:function(e){editor_action.getValue()!==$("#code-action").val()&&(this.codes={ruby:editor_action.getValue()},$.post("/admin/frontend/views/"+e+"/editor/save",this.codes,function(){$("#code-action").val(editor_action.getValue()),$(".action_signal").css("display","none")}))}},codeCallback={codeMirrorCallback:function(){return $("#code-callback").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_callback=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-ruby",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_callback.getValue()===$("#code-action").val()?$(".callback_signal").css("display","none"):$(".callback_signal").css("display","block")})}),editor_callback},save:function(e){editor_callback.getValue()!==$("#code-callback").val()&&(this.codes={ruby:editor_callback.getValue()},$.post("/admin/frontend/callback_functions/"+e+"/editor/save",this.codes,function(){$("#code-callback").val(editor_callback.getValue()),$(".callback_signal").css("display","none")}))}},codeFunction={codeMirrorFunction:function(){return $("#code-function").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_function=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-ruby",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_function.getValue()===$("#code-function").val()?$(".function_signal").css("display","none"):$(".function_signal").css("display","block")})}),editor_function},save:function(e){editor_function.getValue()!==$("#code-function").val()&&(this.codes={ruby:editor_function.getValue()},$.post("/admin/frontend/functions/"+e+"/editor/save",this.codes,function(){$("#code-function").val(editor_callback.getValue()),$(".function_signal").css("display","none")}))}},editor_head="",editor_header="",editor_footer="",controlsLayout={codes:{},save:function(e){this.codes={head:editor_head.getValue(),header:editor_header.getValue(),footer:editor_footer.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-head").val(editor.getValue()),$("#code-header").val(editor_header.getValue()),$("#code-footer").val(editor_footer.getValue()),$(".head_signal").css("display","none"),$(".header_signal").css("display","none"),$(".footer_signal").css("display","none")})}},codeHead={codeMirrorHead:function(){return $("#code-head").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_head=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,theme:"monokai",tabSize:2,autoCloseTags:!0,matchTags:{bothTags:!0},showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-J":"toMatchingTag"}})).on("change",function(){editor_head.getValue()===$("#code-head").val()?$(".head_signal").css("display","none"):$(".head_signal").css("display","block")})}),editor_head},saveHead:function(e){editor_head.getValue()!==$("#code-head").val()&&(this.codes={head:editor_head.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-head").val(editor_head.getValue()),$(".head_signal").css("display","none")}))}},codeHeader={codeMirrorHeader:function(){return $("#code-header").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_header=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_header.getValue()===$("#code-header").val()?$(".header_signal").css("display","none"):$(".header_signal").css("display","block")})}),editor_header},saveHeader:function(e){editor_header.getValue()!==$("#code-header").val()&&(this.codes={header:editor_header.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-header").val(editor_header.getValue()),$(".header_signal").css("display","none")}))}},codeFooter={codeMirrorFooter:function(){return $("#code-footer").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor_footer=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){editor_footer.getValue()===$("#code-footer").val()?$(".footer_signal").css("display","none"):$(".footer_signal").css("display","block")})}),editor_footer},saveFooter:function(e){editor_footer.getValue()!==$("#code-footer").val()&&(this.codes={footer:editor_footer.getValue()},$.post("/admin/frontend/themes/"+e+"/editor/save",this.codes,function(){$("#code-footer").val(editor_footer.getValue()),$(".footer_signal").css("display","none")}))}},partial_editor_css=(editor="",""),partial_editor_js="",controlsPartial={codes:{},savePartial:function(e){this.codes={html:editor.getValue(),scss:partial_editor_css.getValue(),js:partial_editor_js.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$("#code-css").val(partial_editor_css.getValue()),$("#code-js").val(partial_editor_js.getValue()),$(".html_signal").css("display","none"),$(".scss_signal").css("display","none"),$(".js_signal").css("display","none")})}},codePartialHTML={codeMirrorHtml:function(){return $("#code-html").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(editor=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"application/x-ejs",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,theme:"monokai",tabSize:2,autoCloseTags:!0,matchTags:{bothTags:!0},showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-J":"toMatchingTag"}})).on("change",function(){editor.getValue()===$("#code-html").val()?$(".html_signal").css("display","none"):$(".html_signal").css("display","block")})}),editor},savePartial:function(e){editor.getValue()!==$("#code-html").val()&&(this.codes={html:editor.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-html").val(editor.getValue()),$(".html_signal").css("display","none")}))}},codePartialCSS={codeMirrorCSS:function(){return $("#code-css").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(partial_editor_css=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/x-scss",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,showTrailingSpace:!0,tabSize:2,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){partial_editor_css.getValue()===$("#code-css").val()?$(".scss_signal").css("display","none"):$(".scss_signal").css("display","block")})}),partial_editor_css},savePartial:function(e){partial_editor_css.getValue()!==$("#code-css").val()&&(this.codes={scss:partial_editor_css.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-css").val(partial_editor_css.getValue()),$(".scss_signal").css("display","none")}))}},codePartialJs={codeMirrorJs:function(){return $("#code-js").each(function(){CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.anyword})},(partial_editor_js=CodeMirror.fromTextArea($(this).get(0),{lineNumbers:!0,mode:"text/javascript",keyMap:"sublime",theme:"monokai",autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,tabSize:2,showTrailingSpace:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},extraKeys:{"Ctrl-Space":"autocomplete"}})).on("change",function(){partial_editor_js.getValue()===$("#code-js").val()?$(".js_signal").css("display","none"):$(".js_signal").css("display","block")})}),partial_editor_js},savePartial:function(e){partial_editor_js.getValue()!==$("#code-js").val()&&(this.codes={js:partial_editor_js.getValue()},$.post("/admin/frontend/partials/"+e+"/editor/save",this.codes,function(){$("#code-js").val(partial_editor_js.getValue()),$(".js_signal").css("display","none")}))}};